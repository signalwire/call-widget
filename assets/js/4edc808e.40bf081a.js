"use strict";(self.webpackChunkdoc_for_c_2_c_widget=self.webpackChunkdoc_for_c_2_c_widget||[]).push([[308],{3428:(e,t,n)=>{n.d(t,{A:()=>i});const i=n.p+"assets/images/screenshot-695d461ee19699fdea8a94fbb709a9c1.png"},4241:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>g,contentTitle:()=>x,default:()=>f,frontMatter:()=>p,metadata:()=>j,toc:()=>b});var i=n(4848),s=n(8453);function l(e){const t={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",img:"img",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,s.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(t.h1,{id:"introduction-to-the-call-widget",children:"Introduction to the Call Widget"}),"\n",(0,i.jsx)(t.p,{children:"The Call Widget is a Click-to-Call style JavaScript widget which uses the SignalWire SDK and the SignalWire\nC2C service to allow you to embed calls in your website."}),"\n",(0,i.jsx)(t.p,{children:(0,i.jsx)(t.img,{alt:"screenshot of the widget",src:n(3428).A+"",width:"2936",height:"1744"})}),"\n",(0,i.jsx)(t.h2,{id:"installation",children:"Installation"}),"\n",(0,i.jsx)(t.p,{children:"Import the widget from the CDN:"}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-html",children:'<script src="https://cdn.jsdelivr.net/npm/@niravcodes/call-widget/dist/c2c-widget-full.umd.min.js"><\/script>\n'})}),"\n",(0,i.jsx)(t.p,{children:"or install the widget using npm:"}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-bash",children:"npm install @niravcodes/call-widget\n"})}),"\n",(0,i.jsx)(t.h2,{id:"usage",children:"Usage"}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-html",children:'<style>\n  /* This class will be removed from button when the widget fully loads. */\n  .demo-button-disabled {\n    opacity: 0.7;\n    pointer-events: none;\n  }\n</style>\n\n\x3c!-- Button that triggers the call, wherever in the html --\x3e\n<button id="callButton" class="demo-button-disabled">Call</button>\n\n\x3c!-- end of body --\x3e\n<c2c-widget\n  buttonId="callButton"\n  token="<c2c_token or embeds_token>"\n  callDetails=\'{"destination":"/private/demo-1","supportsVideo":false,"supportsAudio":true}\'\n  collectUserDetails="false"\n  survey=\'{"title":"Please take this survey", "description":"We would love to hear your thoughts. Would you like to take a survey?","href":"https://www.google.com"}\'\n  userVariables=\'{"user_type":"guest"}\'\n></c2c-widget>\n\n<script src="https://cdn.jsdelivr.net/npm/@niravcodes/call-widget/dist/c2c-widget-full.umd.min.js"><\/script>\n'})}),"\n",(0,i.jsx)(t.h2,{id:"parameters",children:"Parameters"}),"\n",(0,i.jsxs)(t.table,{children:[(0,i.jsx)(t.thead,{children:(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.th,{children:"Parameter"}),(0,i.jsx)(t.th,{children:"Type"}),(0,i.jsx)(t.th,{children:"Required"}),(0,i.jsx)(t.th,{children:"Default"}),(0,i.jsx)(t.th,{children:"Description"})]})}),(0,i.jsxs)(t.tbody,{children:[(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{children:(0,i.jsx)(t.a,{href:"#buttonid",children:"buttonId"})}),(0,i.jsx)(t.td,{children:"string"}),(0,i.jsx)(t.td,{children:"Yes"}),(0,i.jsx)(t.td,{children:"-"}),(0,i.jsx)(t.td,{children:"ID for Button that triggers call"})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{children:(0,i.jsx)(t.a,{href:"#token",children:"token"})}),(0,i.jsx)(t.td,{children:"string"}),(0,i.jsx)(t.td,{children:"Yes"}),(0,i.jsx)(t.td,{children:"-"}),(0,i.jsx)(t.td,{children:"Authentication token (c2c or embeds)"})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{children:(0,i.jsx)(t.a,{href:"#calldetails",children:"callDetails"})}),(0,i.jsx)(t.td,{children:"object"}),(0,i.jsx)(t.td,{children:"Yes"}),(0,i.jsx)(t.td,{children:"-"}),(0,i.jsx)(t.td,{children:"Call configuration JSON"})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{children:(0,i.jsx)(t.a,{href:"#collectuserdetails",children:"collectUserDetails"})}),(0,i.jsx)(t.td,{children:"boolean"}),(0,i.jsx)(t.td,{children:"No"}),(0,i.jsx)(t.td,{children:"true"}),(0,i.jsx)(t.td,{children:"Show user details form boolean"})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{children:(0,i.jsx)(t.a,{href:"#survey",children:"survey"})}),(0,i.jsx)(t.td,{children:"object"}),(0,i.jsx)(t.td,{children:"No"}),(0,i.jsx)(t.td,{children:"not shown"}),(0,i.jsx)(t.td,{children:"Post-call survey config JSON"})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{children:(0,i.jsx)(t.a,{href:"#uservariables",children:"userVariables"})}),(0,i.jsx)(t.td,{children:"object"}),(0,i.jsx)(t.td,{children:"No"}),(0,i.jsx)(t.td,{}),(0,i.jsxs)(t.td,{children:["Custom call variables JSON (arbitrary JSON key",":value"," pairs)"]})]})]})]}),"\n",(0,i.jsx)(t.h3,{id:"buttonid",children:(0,i.jsx)(t.code,{children:"buttonId"})}),"\n",(0,i.jsxs)(t.p,{children:["The ",(0,i.jsx)(t.code,{children:"buttonId"})," attribute is used to specify the ID of the HTML button element that will trigger the call."]}),"\n",(0,i.jsxs)(t.p,{children:["If the button is not found, the widget will ",(0,i.jsx)(t.strong,{children:"wait"})," for the button to be created. (The button doesn't have to exist in the DOM at the time of widget initialization.)"]}),"\n",(0,i.jsxs)(t.p,{children:["You can use the class ",(0,i.jsx)(t.code,{children:".demo-button-disabled"})," to disable the button while the widget is loading. The widget will remove that particular\nclass once it loads."]}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-html",children:"<style>\n  /* This class will be removed from button when the widget loads.\n   */\n  .demo-button-disabled {\n    opacity: 0.7;\n    pointer-events: none;\n  }\n</style>\n"})}),"\n",(0,i.jsx)(t.h3,{id:"token",children:(0,i.jsx)(t.code,{children:"token"})}),"\n",(0,i.jsx)(t.p,{children:"Authentication token for SignalWire services (either the c2c token from the dashboard, or the embed token)."}),"\n",(0,i.jsxs)(t.p,{children:["Using C2C token is getting recommended for most cases. You can get the C2C token from the SignalWire Space dashboard.\nYou can get the embed token using the ",(0,i.jsx)(t.a,{href:"https://developer.signalwire.com/rest/signalwire-rest/endpoints/fabric/embeds-tokens",children:"Embeds Token"})," API."]}),"\n",(0,i.jsx)(t.p,{children:"You can also use any token received from the Call Fabric authentication, assuming it has the necessary permissions to the address."}),"\n",(0,i.jsx)(t.h3,{id:"calldetails",children:(0,i.jsx)(t.code,{children:"callDetails"})}),"\n",(0,i.jsxs)(t.p,{children:["The ",(0,i.jsx)(t.code,{children:"callDetails"})," object is used to configure the call including destination and media support:"]}),"\n",(0,i.jsxs)(t.ul,{children:["\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.code,{children:"destination"}),": string - Call destination"]}),"\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.code,{children:"supportsVideo"}),": boolean - Enable/disable video"]}),"\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.code,{children:"supportsAudio"}),": boolean - Enable/disable audio"]}),"\n"]}),"\n",(0,i.jsx)(t.p,{children:"Strict JSON format is required for this attribute."}),"\n",(0,i.jsx)(t.h3,{id:"collectuserdetails",children:(0,i.jsx)(t.code,{children:"collectUserDetails"})}),"\n",(0,i.jsx)(t.p,{children:"Whether to show a form collecting user details before starting call."}),"\n",(0,i.jsx)(t.h3,{id:"survey",children:(0,i.jsx)(t.code,{children:"survey"})}),"\n",(0,i.jsx)(t.p,{children:"The survey object is used to configure the post-call survey:"}),"\n",(0,i.jsxs)(t.ul,{children:["\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.code,{children:"title"}),': string - Survey modal title (optional, defaults to "Would you like to take a survey?")']}),"\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.code,{children:"description"}),': string - Survey description text (optional, defaults to "We would love to hear your thoughts. Would you like to take a survey? It only takes 2 minutes.")']}),"\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.code,{children:"href"}),": string - URL to survey (required)"]}),"\n"]}),"\n",(0,i.jsx)(t.p,{children:"Don't set this attribute if you don't want a survey to be shown."}),"\n",(0,i.jsx)(t.p,{children:"Strict JSON format is required for this attribute."}),"\n",(0,i.jsx)(t.h3,{id:"uservariables",children:(0,i.jsx)(t.code,{children:"userVariables"})}),"\n",(0,i.jsxs)(t.p,{children:["Custom variables to attach to the call session. Can be any JSON key",":value"," pair. The following will be overridden by the widget, however:"]}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{children:"callOriginHref - the URL of the page where the widget is hosted\nuserName - the name of the user (if they input it in the form)\nuserEmail - the email of the user (if they input it in the form)\nuserPhone - the phone number of the user (if they input it in the form)\n"})}),"\n",(0,i.jsx)(t.p,{children:"Strict JSON format is required for this attribute."}),"\n",(0,i.jsx)(t.h2,{id:"events",children:"Events"}),"\n",(0,i.jsx)(t.h3,{id:"beforecall",children:(0,i.jsx)(t.code,{children:"beforecall"})}),"\n",(0,i.jsx)(t.p,{children:"This event is triggered when the call is about to start."}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-javascript",children:'const widget = document.querySelector("c2c-widget");\nwidget.addEventListener("beforecall", () => {\n  console.log("beforecall");\n});\n'})})]})}function r(e={}){const{wrapper:t}={...(0,s.R)(),...e.components};return t?(0,i.jsx)(t,{...e,children:(0,i.jsx)(l,{...e})}):l(e)}var d=n(6540),o=n(2303);function c(e){let{children:t,fallback:n}=e;return(0,o.A)()?(0,i.jsx)(i.Fragment,{children:t?.()}):n??null}function a(e){let{buttonId:t,destination:s,supportsVideo:l,supportsAudio:r,token:o}=e;const a=(0,d.useRef)(null);return(0,d.useEffect)((()=>{n.e(219).then(n.bind(n,4219))}),[]),(0,d.useEffect)((()=>{if(a.current){a.current.innerHTML="";const e=document.createElement("c2c-widget");e.setAttribute("buttonId",t),e.setAttribute("callDetails",JSON.stringify({destination:s,supportsVideo:l,supportsAudio:r})),e.setAttribute("token",o),a.current.appendChild(e)}return()=>{a.current&&(a.current.innerHTML="")}}),[t,s,l,r,o]),(0,i.jsx)(c,{children:()=>(0,i.jsx)("div",{ref:a})})}function h(e){let{destination:t,supportsVideo:n,supportsAudio:s,token:l,children:r}=e;const h=(0,o.A)(),[u,p]=(0,d.useState)(Math.random().toString(36).substring(2,15));return h?(0,i.jsx)(c,{children:()=>(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("button",{id:`callButton-${u}`,className:"button button--primary button--lg",style:{margin:"10px 0px"},children:r}),(0,i.jsx)(a,{buttonId:`callButton-${u}`,destination:t,supportsVideo:n,supportsAudio:s,token:l})]})}):null}const u="eyJhbGciOiJkaXIiLCJlbmMiOiJBMjU2R0NNIiwiY2giOiJwdWMuc2lnbmFsd2lyZS5jb20iLCJ0eXAiOiJTQVQifQ..QYHghlPEOE4HjtJb.1WKLEg09c05-g3RujrS0io5h6AJ4mfpKMWtykpMIERJlMuomtOLHrU8picaFHeppbb_-593GjxHfeZiVmYdPZiIPYuNw2znqBuySuPArPfb2NMvXtZHEgfl3sXAdy5xpqSpphxFKStXwylo0EGeC91cVQgn3_lmSBcp13JvwArnu5ULltGmjPJogRbE1PrBsBbEJJioumVSZuuMH5lo7am-wE37Q5GXgou1a9iJWBiBtgk5ysmW4HTvbZ7pZHL5VcnWVy4V0OJL3J4WXl-m47L6bgFmHUijvVWxoFDu4Z7aUfx551OEhefr04F5NuJaHzTWUpgNzQ_VgWho04K96MK--wH_dEyIxtbfUHJSZyk1-Ef_dDCgFK6Rlnl2H5HM4G05gEKWcSjXGGk4tN0g6YvHsrUrAgsZiQeVQ-ggCHHRcmYX1OeXYbv1vEPml8i5JPUHAak5VvOQLYoG2ydb5kVv3WdM0oWKGHzTFPLFmjTaRxSC2b378BGbR7hCxbY9NdaLFnSn45KDkv1_a-saR9gDCBa2ZCPbkFmWRKLtGORFoiN-mLYAPTugidqZx40Ue4hav-jX178udYpVgSmun_rMHoN81t0Sb4xqMovs2i47-WLyzTwaGBK2CgLeHohGBvB9aWsFOV7F_YrZlcn7ptKo7RdNSrfBkiw7F6Sf8oIOz.426h9VZWDSVYDUIL9a1wDg",p={title:"Introduction",sidebar_position:1},x=void 0,j={id:"index",title:"Introduction",description:"Demo",source:"@site/docs/index.mdx",sourceDirName:".",slug:"/",permalink:"/call-widget/",draft:!1,unlisted:!1,tags:[],version:"current",sidebarPosition:1,frontMatter:{title:"Introduction",sidebar_position:1},sidebar:"docSidebar",next:{title:"Development Notes",permalink:"/call-widget/developer/"}},g={},b=[{value:"Installation",id:"installation",level:2},{value:"Usage",id:"usage",level:2},{value:"Parameters",id:"parameters",level:2},{value:"<code>buttonId</code>",id:"buttonid",level:3},{value:"<code>token</code>",id:"token",level:3},{value:"<code>callDetails</code>",id:"calldetails",level:3},{value:"<code>collectUserDetails</code>",id:"collectuserdetails",level:3},{value:"<code>survey</code>",id:"survey",level:3},{value:"<code>userVariables</code>",id:"uservariables",level:3},{value:"Events",id:"events",level:2},{value:"<code>beforecall</code>",id:"beforecall",level:3},{value:"Demo",id:"demo",level:2}];function m(e){const t={code:"code",h2:"h2",p:"p",pre:"pre",...(0,s.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(r,{}),"\n",(0,i.jsx)(t.h2,{id:"demo",children:"Demo"}),"\n","\n",(0,i.jsx)(t.p,{children:"The buttons below are created by the react wrapper for the widget."}),"\n",(0,i.jsx)(t.p,{children:"The react wrapper is used as follows:"}),"\n","\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-jsx",children:'<C2CWidget\n  destination="/private/demo-1"\n  supportsVideo={true}\n  supportsAudio={true}\n  token={token}\n>Call with Video</C2CWidget>\n'})}),"\n",(0,i.jsx)(h,{destination:"/private/demo-1",supportsVideo:!0,supportsAudio:!0,token:u,children:"Call with Video"}),"\n",(0,i.jsx)(h,{destination:"/private/demo-3",supportsVideo:!1,supportsAudio:!0,token:u,children:"Call only audio 2"}),"\n",(0,i.jsx)(h,{destination:"/private/demo-4",supportsVideo:!1,supportsAudio:!0,token:u,children:"Call only audio 3"})]})}function f(e={}){const{wrapper:t}={...(0,s.R)(),...e.components};return t?(0,i.jsx)(t,{...e,children:(0,i.jsx)(m,{...e})}):m(e)}}}]);